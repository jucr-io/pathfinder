service_name: "max-test-subscription-handler"
health_endpoint:
  hostname: 0.0.0.0
  port: 8088
router_endpoint:
  hostname: 0.0.0.0
  port: 8005
  path: "/graphql"
  subscription:
    inject_peer: "router.router"
link_version: "1.0"
federation_version: "2.7"
listeners:
  - operation: "chargingSessionChanged"
    entity_name: "ChargingSession"
    description: "Notify when a charging session has changed, here with custom description." # optional -- default=(autogenerated)
    id_field: "id"
    ttl_ms: 60000 # optional max time a subscription can run until terminated by the manager
    topics:
      - name: "evses.charging_sessions.integration_events.charging_session_started"
        cap: 64 # optional max number of messages to be sent to the router
        delay_ms: 500 # optional delay between receiving and notifying the router
        data_serde: "protobuf_sr" # allowed: protobuf, protobuf_sr, json -- default=protobuf_sr
        data_source: "key" # allowed: key, value -- default=key
        protobuf_id_tag: 1 # only for protobuf, protobuf_sr -- default=1
        # rate_limit
      - name: "evses.charging_sessions.integration_events.charging_session_updated"
      - name: "evses.charging_sessions.integration_events.charging_session_terminated"
      - name: "evses.charging_sessions.integration_events.charging_session_finished"
        terminates_subscriptions: true # default=false
  - operation: "evseTelemetryChanged"
    entity_name: "EVSETelemetry"
    id_field: "evseIdDemo"
    ttl_ms: 3000
    topics:
      - name: "evses.evses.integration_events.evse_telemetry_updated"
        data_source: "value"
        protobuf_id_tag: 2
